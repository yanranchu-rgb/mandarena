<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8" />
  <title>Mandarena</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
</head>
<body>
  <header class="top-header">
    <h1 class="title">Mandarena</h1>
  </header>

  <section class="instruction-area">
    <div class="instruction-inner">
      <div class="avatar-box" id="avatar-box-p1">
        <div class="avatar p1">
          <svg viewBox="0 0 100 100" class="avatar-svg">
            <rect x="2" y="2" width="96" height="96" fill="#ffd1e0" stroke="#000" stroke-width="3" />
            <circle cx="35" cy="40" r="8" fill="#000" class="eye eye-left" />
            <circle cx="65" cy="40" r="8" fill="#000" class="eye eye-right" />
            <polygon points="40,65 50,75 60,65" fill="#f27f8a" stroke="#000" stroke-width="2" />
            <ellipse cx="50" cy="55" rx="5" ry="3" fill="#000" />
            <path d="M20 25 L35 5 L50 25" stroke="#000" stroke-width="3" fill="#ffd1e0" />
            <path d="M80 25 L65 5 L50 25" stroke="#000" stroke-width="3" fill="#ffd1e0" />
          </svg>
        </div>
        <div class="name-tag">P1</div>
      </div>

      <div id="instruction" class="instruction typewriter">Press <strong>Start Game</strong></div>

      <div class="avatar-box" id="avatar-box-p2">
        <div class="avatar p2">
          <svg viewBox="0 0 100 100" class="avatar-svg">
            <rect x="2" y="2" width="96" height="96" fill="#ffcf99" stroke="#000" stroke-width="3" />
            <polygon points="20,20 35,5 45,25" fill="#ffa94d" stroke="#000" stroke-width="3" />
            <polygon points="80,20 65,5 55,25" fill="#ffa94d" stroke="#000" stroke-width="3" />
            <rect x="20" y="48" width="60" height="10" fill="#000" />
            <rect x="22" y="50" width="56" height="6" fill="#222" />
            <circle cx="35" cy="40" r="6" fill="#000" class="eye eye-left" />
            <circle cx="65" cy="40" r="6" fill="#000" class="eye eye-right" />
            <circle cx="50" cy="60" r="4" fill="#c00" />
            <path d="M20,70 L90,70" stroke="#000" stroke-width="2" />
          </svg>
        </div>
        <div class="name-tag">P2</div>
      </div>
    </div>
  </section>

  <div class="buttons-row">
    <div class="buttons">
      <button id="startBtn" class="pix-btn">START GAME</button>
      <button id="endBtn" class="pix-btn danger">END GAME</button>
      <button id="randomBtn" class="pix-btn">RANDOMIZE WORDS</button>
    </div>
  </div>

  <main class="board-wrap">
    <div id="topTimer" class="circle-timer hidden" aria-live="polite">10</div>
    <div id="board" class="board disabled"></div>
  </main>

  <div id="speechModal" class="modal hidden" role="dialog" aria-modal="true">
  <div class="modal-content zoom-in">
    <div class="modal-header">
      <div class="modal-timer">
        <div id="modalTimer" class="circle-timer small">5</div>
      </div>
      <div id="attemptText" class="attempt-text">Attempt 1 / 3</div>
    </div>

    <!-- Tip for single-character words -->
    <p id="modalInstruction" style="display:none; color:rgb(57, 110, 244); font-weight:bold;">
      Tip: try to stretch the end of the <br>
      word longer for better recognition!
    </p>

    <div class="modal-word" id="modalWord">â€”</div>
    <div class="modal-actions">
      <button id="speakBtn" class="pix-btn speak">CLICK TO SPEAK</button>
    </div>
    <div id="modalResult" class="modal-result"></div>
  </div>
</div>

  <div id="winnerOverlay" class="winner-overlay hidden">
    <div id="winnerText" class="winner-text">Player 1 Wins!</div>
  </div>

  <script>
    const AUDIO_CLICK   = "{{ url_for('static', filename='click.mp3') }}";
    const AUDIO_BINGO   = "{{ url_for('static', filename='bingo.mp3') }}";
    const AUDIO_ERROR   = "{{ url_for('static', filename='error.mp3') }}";
    const AUDIO_WINNER  = "{{ url_for('static', filename='winner.mp3') }}";
    const AUDIO_MARKING = "{{ url_for('static', filename='marking.mp3') }}";
    const AUDIO_TIKTOK  = "{{ url_for('static', filename='tiktok.mp3') }}";
  </script>
  <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>